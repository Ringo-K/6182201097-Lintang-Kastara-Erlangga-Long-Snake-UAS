System.register("chunks:///_virtual/FoodTesting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManagerScript.ts"],(function(e){var i,t,a,n,r,o,s,l,p,h,u,c,d,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,l=e.SpriteFrame,p=e.Node,h=e.Vec3,u=e.instantiate,c=e.Sprite,d=e.Component},function(e){g=e.GameManagerScript}],execute:function(){var f,w,v,m,S,y,A,F,z,b,P,T;o._RF.push({},"80aacsayVZHu43yGzZmlgfQ","FoodTesting",void 0);var L=s.ccclass,M=s.property,x=function(e){return e[e.NORMAL=0]="NORMAL",e[e.SPECIAL=1]="SPECIAL",e[e.PENALTY1=2]="PENALTY1",e[e.PENALTY2=3]="PENALTY2",e[e.BUFF1=4]="BUFF1",e[e.BUFF2=5]="BUFF2",e}(x||{});e("FoodTesting",(f=L("FoodTesting"),w=M({type:[l]}),v=M({type:p}),m=M({type:p}),f((A=i((y=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,n(i,"foodSprites",A,r(i)),n(i,"foodPrefab",F,r(i)),n(i,"wallPrefab",z,r(i)),n(i,"gridSize",b,r(i)),n(i,"gameAreaSize",P,r(i)),n(i,"gameAreaPosition",T,r(i)),i.spawnInterval=2,i.despawnTime=10,i.spawnTimer=0,i.isSpawning=!1,i.activeFood=[],i.activeWalls=[],i}t(i,e);var o=i.prototype;return o.update=function(e){if(this.isSpawning){this.spawnTimer+=e,this.spawnTimer>=this.spawnInterval&&(this.spawnTimer-=this.spawnInterval,this.spawn());for(var t=this.activeFood.length-1;t>=0;t--){var a=this.activeFood[t],n=a.getComponent(i);n&&n.isExpired()&&this.despawn(a)}}},o.spawn=function(){var e,i,t,n=this,r=this.gameAreaSize.x/2,o=this.gameAreaSize.y/2;do{e=Math.floor(Math.random()*(this.gameAreaSize.x/this.gridSize))*this.gridSize-r+this.gameAreaPosition.x,i=Math.floor(Math.random()*(this.gameAreaSize.y/this.gridSize))*this.gridSize-o+this.gameAreaPosition.y,t=!0;var s=g.Instance.getSnakeHead(),l=s.getBodySegments(),p=s.getTailSegment();if(s.node.position.equals(new h(e+10,i+10,0)))t=!1;else{for(var d,f=a(l);!(d=f()).done;){if(d.value.position.equals(new h(e+10,i+10,0))){t=!1;break}}p.position.equals(new h(e+10,i+10,0))&&(t=!1)}}while(!t);var w=[{type:x.NORMAL,weight:60},{type:x.SPECIAL,weight:20},{type:x.PENALTY1,weight:5},{type:x.PENALTY2,weight:5},{type:x.BUFF1,weight:5},{type:x.BUFF2,weight:5}];var v=u(this.foodPrefab);v.setPosition(new h(e+10,i+10,0)),v.parent=this.node.parent;var m=function(e){for(var i,t=e.reduce((function(e,i){return e+i.weight}),0),n=Math.random()*t,r=0,o=a(e);!(i=o()).done;){var s=i.value;if(n<(r+=s.weight))return s.type}}(w),S=v.getComponent(c);S&&this.foodSprites[m]&&(S.spriteFrame=this.foodSprites[m]),v.foodType=m,this.activeFood.push(v),this.scheduleOnce((function(){return n.despawn(v)}),this.despawnTime)},o.despawn=function(e){var i=this.activeFood.indexOf(e);-1!==i&&this.activeFood.splice(i,1),e.destroy()},o.isExpired=function(){return!1},o.startSpawning=function(){this.isSpawning=!0,this.spawnTimer=0},o.stopSpawning=function(){this.isSpawning=!1;for(var e,i=a(this.activeFood);!(e=i()).done;){e.value.destroy()}this.activeFood=[]},o.spawnTrapWall=function(e){var i=this;void 0===e&&(e=4);var t,n,r,o=this.gameAreaSize.x/2,s=this.gameAreaSize.y/2;do{t=Math.floor(Math.random()*(this.gameAreaSize.x/this.gridSize))*this.gridSize-o+this.gameAreaPosition.x,n=Math.floor(Math.random()*(this.gameAreaSize.y/this.gridSize))*this.gridSize-s+this.gameAreaPosition.y,r=!0;var l=g.Instance.getSnakeHead(),p=l.getBodySegments(),c=l.getTailSegment(),d=new h(t+10,n+10,0);if(l.node.position.equals(d))r=!1;else{for(var f,w=a(p);!(f=w()).done;){if(f.value.position.equals(d)){r=!1;break}}c.position.equals(d)&&(r=!1)}}while(!r);var v=u(this.wallPrefab);v.setPosition(new h(t+10,n+10,0)),v.parent=this.node.parent,this.activeWalls.push(v),this.scheduleOnce((function(){var e=i.activeWalls.indexOf(v);-1!==e&&i.activeWalls.splice(e,1),v.destroy()}),e)},o.getActiveFood=function(){return this.activeFood},o.getActiveWall=function(){return this.activeWalls},i}(d)).prototype,"foodSprites",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=i(y.prototype,"foodPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(y.prototype,"wallPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(y.prototype,"gridSize",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),P=i(y.prototype,"gameAreaSize",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(320,340,0)}}),T=i(y.prototype,"gameAreaPosition",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(0,70,0)}}),S=y))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManagerScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SnakeScript.ts","./HungerScript.ts","./LandmineScript.ts","./FoodTesting.ts"],(function(e){var t,n,i,r,a,o,s,u,c,l,h,d,p,f,g,S,b,v,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,s=e._decorator,u=e.SpriteFrame,c=e.Label,l=e.Node,h=e.AudioSource,d=e.Sprite,p=e.director,f=e.Button,g=e.Component},function(e){S=e.SnakeScript},function(e){b=e.HungerScript},function(e){v=e.LandmineScript},function(e){y=e.FoodTesting}],execute:function(){var m,L,w,k,C,H,R,P,A,D,z,B,O,E,F,M,G,I,T,N,W,U,K,V,Y,_,X,J,j,x,Z,q,Q,$,ee,te,ne,ie,re,ae,oe,se,ue,ce,le,he,de,pe,fe,ge,Se,be,ve,ye;o._RF.push({},"17f56aKrKFKXrX7XlZK2SlH","GameManagerScript",void 0);var me=s.ccclass,Le=s.property,we=function(e){return e[e.NORMAL=0]="NORMAL",e[e.SPECIAL=1]="SPECIAL",e[e.PENALTY1=2]="PENALTY1",e[e.PENALTY2=3]="PENALTY2",e[e.BUFF1=4]="BUFF1",e[e.BUFF2=5]="BUFF2",e}(we||{}),ke=function(e){return e[e.NORMAL=0]="NORMAL",e[e.ALT1=1]="ALT1",e}(ke||{});e("GameManagerScript",(m=me("GameManagerScript"),L=Le({type:[u]}),w=Le({type:c}),k=Le({type:l}),C=Le({type:l}),H=Le({type:l}),R=Le({type:l}),P=Le({type:l}),A=Le({type:l}),D=Le({type:c}),z=Le({type:c}),B=Le(c),O=Le(c),E=Le({type:S}),F=Le({type:y}),M=Le({type:v}),G=Le({type:l}),I=Le({type:b}),T=Le({type:l}),N=Le({type:l}),W=Le({type:l}),U=Le({type:l}),K=Le({type:l}),V=Le({type:h}),Y=Le({type:h}),_=Le({type:h}),m(((ye=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"backgroundSprites",j,r(t)),i(t,"reversalWarningLabel",x,r(t)),i(t,"gameBackground",Z,r(t)),i(t,"startScreen",q,r(t)),i(t,"difficultyScreen",Q,r(t)),i(t,"instructionScreen",$,r(t)),i(t,"gameOverScreen",ee,r(t)),i(t,"creditScreen",te,r(t)),i(t,"scoreLabel",ne,r(t)),i(t,"scoreValueLabel",ie,r(t)),i(t,"highScoreAlertLabel",re,r(t)),i(t,"highScoreLabel",ae,r(t)),i(t,"snakeHead",oe,r(t)),i(t,"food",se,r(t)),i(t,"landMine",ue,r(t)),i(t,"hungerBar",ce,r(t)),i(t,"hungerBarController",le,r(t)),i(t,"pauseScreen",he,r(t)),i(t,"dPadUp",de,r(t)),i(t,"dPadDown",pe,r(t)),i(t,"dPadLeft",fe,r(t)),i(t,"dPadRight",ge,r(t)),i(t,"BGM",Se,r(t)),i(t,"pointSound",be,r(t)),i(t,"deathSound",ve,r(t)),t.score=0,t.foodHungerValue=10,t.highScore=0,t.isGameActive=!1,t.isPaused=!1,t.foodEatenCounter=0,t.gameDifficulty=void 0,t.reverseControls=!1,t.isCountdownRunning=!1,t}n(t,e);var o=t.prototype;return o.onLoad=function(){t.Instance=this,this.difficultyScreen.active=!1,this.instructionScreen.active=!1,this.gameOverScreen.active=!1,this.pauseScreen.active=!1,this.creditScreen.active=!1,this.hungerBar.active=!1,this.addButtonListener(this.dPadUp,"UP"),this.addButtonListener(this.dPadDown,"DOWN"),this.addButtonListener(this.dPadLeft,"LEFT"),this.addButtonListener(this.dPadRight,"RIGHT"),this.showStartScreen()},o.showStartScreen=function(){this.startScreen.active=!0;var e=localStorage.getItem("LongSnakeData");if(e){var t=JSON.parse(e);this.highScore=t.HIGHSCORE||0}this.updateHighScoreLabel()},o.showDifficultyScreen=function(){this.startScreen.active=!1,this.difficultyScreen.active=!0},o.setDiff1=function(){this.startInstruction(),this.gameDifficulty=1},o.setDiff2=function(){this.startInstruction(),this.gameDifficulty=2},o.startInstruction=function(){this.difficultyScreen.active=!1,this.instructionScreen.active=!0;var e=function(e){for(var t,n=e.reduce((function(e,t){return e+t.weight}),0),i=Math.random()*n,r=0,o=a(e);!(t=o()).done;){var s=t.value;if(i<(r+=s.weight))return s.type}}([{type:ke.NORMAL,weight:50},{type:ke.ALT1,weight:50}]),t=this.gameBackground.getComponent(d);t&&this.backgroundSprites[e]&&(t.spriteFrame=this.backgroundSprites[e]),this.snakeHead.initializeSnake()},o.startGame=function(){var e=this;this.instructionScreen.active=!1,this.hungerBar.active=!0,this.isGameActive=!0,this.food.startSpawning(),this.landMine.startSpawning(),this.score=0,this.updateScore(0),this.BGM.play(),this.scheduleOnce((function(){return e.startReversalCountdown()}),this.getRandomDelay())},o.gameOver=function(){this.isGameActive&&(this.isGameActive=!1,this.food.stopSpawning(),this.landMine.stopSpawning(),this.hungerBarController.stopHunger(),this.gameOverScreen.active=!0,this.deathSound.play(),this.updateScoreResultLabel(),this.score>this.highScore&&this.setHighScore(this.score),this.unscheduleAllCallbacks(),this.reversalWarningLabel.node.active=!1,this.reverseControls=!1)},o.restartGame=function(){var e=this;this.gameOverScreen.active=!1,this.isGameActive=!0,this.snakeHead.reset(),this.food.startSpawning(),this.landMine.startSpawning(),this.hungerBarController.resetHunger(),this.score=0,this.updateScore(0),this.reverseControls=!1,this.isCountdownRunning=!1,this.reversalWarningLabel&&(this.reversalWarningLabel.node.active=!1),this.scheduleOnce((function(){return e.startReversalCountdown()}),this.getRandomDelay())},o.pauseGame=function(){this.isGameActive&&(this.isPaused=!this.isPaused,this.pauseScreen.active=this.isPaused,this.isPaused?(this.pauseScreen.active=!0,p.pause()):(this.pauseScreen.active=!1,p.resume()))},o.home=function(){t.Instance=null,p.loadScene("LongSnake")},o.openCredits=function(){this.startScreen.active=!1,this.creditScreen.active=!0},o.closeCredits=function(){this.startScreen.active=!0,this.creditScreen.active=!1},o.toggleControlReversal=function(){this.reverseControls=!this.reverseControls,console.log("Controls reversed: "+this.reverseControls)},o.updateScore=function(e){this.scoreLabel.string=""+e},o.onFoodEaten=function(e){var t=this;this.food.despawn(e),this.foodEatenCounter++;var n=this.getGameDiff(),i=1;switch(e.foodType||we.NORMAL){case we.PENALTY1:i=2,this.snakeHead.snakeSpeedModifier(.1),this.scheduleOnce((function(){t.resetSnakeSpeed()}),3);break;case we.PENALTY2:i=5;var r=this.food.getComponent(y);r&&r.spawnTrapWall(5);break;case we.SPECIAL:i=3;break;case we.BUFF1:i=2,this.snakeHead.powerup(1),this.scheduleOnce((function(){t.resetSnakeSpeed()}),3);break;case we.BUFF2:i=5,this.snakeHead.powerup(2)}1===n?(this.foodEatenCounter%3==0&&this.snakeHead.growSnake(),this.score+=i,this.updateScore(this.score)):(this.snakeHead.growSnake(),this.foodEatenCounter%3==0&&(this.score+=i,this.updateScore(this.score))),this.pointSound.play(),this.hungerBarController.addHunger(this.foodHungerValue)},o.resetSnakeSpeed=function(){this.foodEatenCounter<5?this.snakeHead.snakeSpeedReset(1):this.foodEatenCounter<10?this.snakeHead.snakeSpeedReset(2):this.snakeHead.snakeSpeedReset(3)},o.onLandmineEaten=function(e){this.snakeHead.getInvincibility?(this.landMine.despawn(e),this.snakeHead.setInvincibility(!1)):(this.landMine.despawn(e),this.gameOver())},o.onWallCrashed=function(){this.gameOver()},o.getFoodTesting=function(){return this.food},o.getSnakeHead=function(){return this.snakeHead},o.getLandmineScript=function(){return this.landMine},o.addButtonListener=function(e,t){var n=this,i=e.getComponent(f);i&&i.node.on(f.EventType.CLICK,(function(){return n.onDPadPress(t)}),this)},o.onDPadPress=function(e){if(this.snakeHead){var t=this.reverseControls;switch(e){case"UP":this.snakeHead.onKeyDown({keyCode:t?40:38});break;case"DOWN":this.snakeHead.onKeyDown({keyCode:t?38:40});break;case"LEFT":this.snakeHead.onKeyDown({keyCode:t?39:37});break;case"RIGHT":this.snakeHead.onKeyDown({keyCode:t?37:39})}}},o.updateScoreResultLabel=function(){this.scoreValueLabel&&(this.scoreValueLabel.string=""+this.score),this.highScoreAlertLabel&&this.score>this.highScore&&(this.highScoreAlertLabel.node.active=!0)},o.getGameDiff=function(){return this.gameDifficulty},o.getFoodEaten=function(){return this.foodEatenCounter},o.setHighScore=function(e){this.highScore=e,localStorage.setItem("LongSnakeData",JSON.stringify({HIGHSCORE:this.highScore})),this.updateHighScoreLabel()},o.updateHighScoreLabel=function(){this.highScoreLabel&&(this.highScoreLabel.string="HIGHSCORE: "+this.highScore)},o.startReversalCountdown=function(){var e=this;if(!this.isCountdownRunning&&this.isGameActive){this.isCountdownRunning=!0;var t=3;this.reversalWarningLabel.node.active=!0,this.reversalWarningLabel.string="Controls reversing in: "+t,this.schedule((function(){--t>0?e.reversalWarningLabel.string="Controls reversing in: "+t:(e.unscheduleAllCallbacks(),e.reversalWarningLabel.node.active=!1,e.reverseControls=!e.reverseControls,console.log("Control Reversed: "+e.reverseControls),e.isCountdownRunning=!1,e.scheduleOnce((function(){return e.startReversalCountdown()}),e.getRandomDelay()))}),1,2,1)}},o.getRandomDelay=function(){return 30+30*Math.random()},o.onDestroy=function(){t.Instance=null},t}(g)).Instance=void 0,j=t((J=ye).prototype,"backgroundSprites",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(J.prototype,"reversalWarningLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(J.prototype,"gameBackground",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(J.prototype,"startScreen",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(J.prototype,"difficultyScreen",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(J.prototype,"instructionScreen",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(J.prototype,"gameOverScreen",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(J.prototype,"creditScreen",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(J.prototype,"scoreLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(J.prototype,"scoreValueLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(J.prototype,"highScoreAlertLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(J.prototype,"highScoreLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(J.prototype,"snakeHead",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(J.prototype,"food",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(J.prototype,"landMine",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(J.prototype,"hungerBar",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(J.prototype,"hungerBarController",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(J.prototype,"pauseScreen",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(J.prototype,"dPadUp",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(J.prototype,"dPadDown",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(J.prototype,"dPadLeft",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(J.prototype,"dPadRight",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(J.prototype,"BGM",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(J.prototype,"pointSound",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(J.prototype,"deathSound",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=J))||X));o._RF.pop()}}}));

System.register("chunks:///_virtual/HungerScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManagerScript.ts"],(function(e){var r,n,t,u,i,a,s,c,g;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,u=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.ProgressBar,c=e.Component},function(e){g=e.GameManagerScript}],execute:function(){var o,h,l,p,H,f,d;i._RF.push({},"5e940FFkTtCzZIqAu67V7nX","HungerScript",void 0);var m=a.ccclass,v=a.property;e("HungerScript",(o=m("HungerScript"),h=v(s),o((H=r((p=function(e){function r(){for(var r,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,t(r,"hungerBar",H,u(r)),t(r,"maxHunger",f,u(r)),t(r,"hungerDecreaseRate",d,u(r)),r.hungerDecreaseInterval=1,r.currentHunger=0,r}n(r,e);var i=r.prototype;return i.start=function(){this.currentHunger=this.maxHunger,this.updateHungerBar(),this.schedule(this.decreaseHunger,this.hungerDecreaseInterval)},i.decreaseHunger=function(){this.currentHunger-=this.hungerDecreaseRate,this.currentHunger<=0&&this.onStarving(),this.updateHungerBar()},i.updateHungerBar=function(){this.hungerBar&&(this.hungerBar.progress=this.currentHunger/this.maxHunger)},i.addHunger=function(e){this.currentHunger+=e,this.currentHunger>this.maxHunger&&(this.currentHunger=this.maxHunger),this.updateHungerBar()},i.onStarving=function(){g.Instance.gameOver()},i.stopHunger=function(){this.unschedule(this.decreaseHunger)},i.resetHunger=function(){this.currentHunger=this.maxHunger,this.updateHungerBar(),this.schedule(this.decreaseHunger,this.hungerDecreaseInterval)},r}(c)).prototype,"hungerBar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=r(p.prototype,"maxHunger",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),d=r(p.prototype,"hungerDecreaseRate",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=p))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/LandmineScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManagerScript.ts"],(function(e){var i,n,t,a,r,s,o,p,c,l,d,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.createForOfIteratorHelperLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,p=e.Node,c=e.Vec3,l=e.instantiate,d=e.Component},function(e){u=e.GameManagerScript}],execute:function(){var h,m,g,f,w,v,S,y;s._RF.push({},"acde8NNJ+JC55TvR2ftdx1Q","LandmineScript",void 0);var z=o.ccclass,b=o.property;e("LandmineScript",(h=z("LandmineScript"),m=b({type:p}),h((w=i((f=function(e){function i(){for(var i,n=arguments.length,t=new Array(n),s=0;s<n;s++)t[s]=arguments[s];return i=e.call.apply(e,[this].concat(t))||this,a(i,"landMinePrefab",w,r(i)),a(i,"gridSize",v,r(i)),a(i,"gameAreaSize",S,r(i)),a(i,"gameAreaPosition",y,r(i)),i.spawnInterval=8,i.despawnTime=5,i.spawnTimer=0,i.isSpawning=!1,i.activeLandmine=[],i}n(i,e);var s=i.prototype;return s.update=function(e){if(this.isSpawning){this.spawnTimer+=e,this.spawnTimer>=this.spawnInterval&&(this.spawnTimer-=this.spawnInterval,this.spawn());for(var n=this.activeLandmine.length-1;n>=0;n--){var t=this.activeLandmine[n],a=t.getComponent(i);a&&a.isExpired()&&this.despawn(t)}}},s.spawn=function(){var e,i,n,a=this,r=this.gameAreaSize.x/2,s=this.gameAreaSize.y/2;do{e=Math.floor(Math.random()*(this.gameAreaSize.x/this.gridSize))*this.gridSize-r+this.gameAreaPosition.x,i=Math.floor(Math.random()*(this.gameAreaSize.y/this.gridSize))*this.gridSize-s+this.gameAreaPosition.y,n=!0;var o=u.Instance.getSnakeHead(),p=o.getBodySegments(),d=o.getTailSegment();if(o.node.position.equals(new c(e+10,i+10,0)))n=!1;else{for(var h,m=t(p);!(h=m()).done;){if(h.value.position.equals(new c(e+10,i+10,0))){n=!1;break}}d.position.equals(new c(e+10,i+10,0))&&(n=!1)}}while(!n);var g=l(this.landMinePrefab);g.setPosition(new c(e+10,i+10,0)),g.parent=this.node.parent,this.activeLandmine.push(g),this.scheduleOnce((function(){return a.despawn(g)}),this.despawnTime)},s.despawn=function(e){var i=this.activeLandmine.indexOf(e);-1!==i&&this.activeLandmine.splice(i,1),e.destroy()},s.isExpired=function(){return!1},s.startSpawning=function(){this.isSpawning=!0,this.spawnTimer=0},s.stopSpawning=function(){this.isSpawning=!1;for(var e,i=t(this.activeLandmine);!(e=i()).done;){e.value.destroy()}this.activeLandmine=[]},s.getActiveLandmine=function(){return this.activeLandmine},i}(d)).prototype,"landMinePrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(f.prototype,"gridSize",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),S=i(f.prototype,"gameAreaSize",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(320,340,0)}}),y=i(f.prototype,"gameAreaPosition",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(0,70,0)}}),g=f))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./FoodTesting.ts","./GameManagerScript.ts","./HungerScript.ts","./LandmineScript.ts","./SnakeScript.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/SnakeScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManagerScript.ts"],(function(e){var t,i,n,o,s,a,r,h,l,c,d,g,u,m,p,S,f,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,o=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,h=e.Sprite,l=e.SpriteFrame,c=e.Node,d=e.input,g=e.Input,e.EventKeyboard,u=e.KeyCode,m=e.Vec3,p=e.instantiate,S=e.Vec2,f=e.Component},function(e){y=e.GameManagerScript}],execute:function(){var v,b,k,P,w,I,z,D,x,A,F,R,L,C,O,W,_;a._RF.push({},"25aa6dKSwBHPphBaJxF2KfF","SnakeScript",void 0);var K=r.ccclass,E=r.property;e("SnakeScript",(v=K("SnakeScript"),b=E(h),k=E(l),P=E(l),w=E(l),I=E(l),z=E(c),D=E(c),v((F=t((A=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"headSprite",F,s(t)),o(t,"headUp",R,s(t)),o(t,"headDown",L,s(t)),o(t,"headLeft",C,s(t)),o(t,"headRight",O,s(t)),o(t,"bodySegmentPrefab",W,s(t)),o(t,"tailSegmentPrefab",_,s(t)),t.direction=new S(1,0),t.nextDirection=new S(1,0),t.moveInterval=.2,t.timer=0,t.gridSize=20,t.gameAreaSize=new S(320,340),t.gameAreaPosition=new m(0,70,0),t.bodySegments=[],t.tailSegment=null,t.invincibility=!1,t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.node.active=!1,d.on(g.EventType.KEY_DOWN,this.onKeyDown,this)},a.update=function(e){y.Instance.isGameActive&&(this.timer+=e,this.timer>=this.moveInterval&&(this.timer-=this.moveInterval,this.direction.set(this.nextDirection),this.moveSnake(),this.checkFoodCollision(),this.checkLandmineCollision(),this.checkSelfCollision()))},a.onKeyDown=function(e){if(y.Instance.isGameActive){var t=y.Instance.reverseControls;switch(e.keyCode){case u.ARROW_UP:0===this.direction.y&&(this.nextDirection.set(0,t?-1:1),this.headSprite.spriteFrame=t?this.headDown:this.headUp);break;case u.ARROW_DOWN:0===this.direction.y&&(this.nextDirection.set(0,t?1:-1),this.headSprite.spriteFrame=t?this.headUp:this.headDown);break;case u.ARROW_LEFT:0===this.direction.x&&(this.nextDirection.set(t?1:-1,0),this.headSprite.spriteFrame=t?this.headRight:this.headLeft);break;case u.ARROW_RIGHT:0===this.direction.x&&(this.nextDirection.set(t?-1:1,0),this.headSprite.spriteFrame=t?this.headLeft:this.headRight)}}},a.moveSnake=function(){var e=this.node.position.clone().add3f(this.direction.x*this.gridSize,this.direction.y*this.gridSize,0),t=this.gameAreaPosition.x-this.gameAreaSize.x/2,i=this.gameAreaPosition.x+this.gameAreaSize.x/2,n=this.gameAreaPosition.y-this.gameAreaSize.y/2,o=this.gameAreaPosition.y+this.gameAreaSize.y/2;if(e.x<t||e.x>i||e.y<n||e.y>o)y.Instance.gameOver();else{var s=null;this.bodySegments.length>0&&(s=this.bodySegments[this.bodySegments.length-1].position.clone());for(var a=this.bodySegments.length-1;a>0;a--){var r=this.bodySegments[a],h=this.bodySegments[a-1];r.setPosition(h.position)}this.bodySegments.length>0&&this.bodySegments[0].setPosition(this.node.position),this.node.setPosition(e),this.tailSegment&&s&&this.tailSegment.setPosition(s)}},a.initializeSnake=function(){var e=new m(10,70,0);this.node.active=!0,this.node.setPosition(e);var t=p(this.bodySegmentPrefab);t.parent=this.node.parent,t.setPosition(e.x-this.gridSize,e.y,0),this.bodySegments.push(t),this.tailSegment=p(this.tailSegmentPrefab),this.tailSegment.parent=this.node.parent,this.tailSegment.setPosition(e.x-2*this.gridSize,e.y,0)},a.checkFoodCollision=function(){for(var e=this.node.position,t=y.Instance.getFoodTesting().getActiveFood(),i=0;i<t.length;i++){var n=t[i];if(e.equals(n.position)){y.Instance.onFoodEaten(n);break}}},a.checkLandmineCollision=function(){for(var e=this.node.position,t=y.Instance.getLandmineScript().getActiveLandmine(),i=0;i<t.length;i++){var n=t[i];if(e.equals(n.position)){y.Instance.onLandmineEaten(n);break}}},a.checkWallCollision=function(){for(var e=this.node.position,t=y.Instance.getFoodTesting().getActiveWall(),i=0;i<t.length;i++){var n=t[i];if(e.equals(n.position)){y.Instance.onWallCrashed();break}}},a.growSnake=function(){var e=p(this.bodySegmentPrefab);if(e.parent=this.node.parent,this.bodySegments.length>0){var t=this.bodySegments[this.bodySegments.length-1];e.setPosition(t.position)}else e.setPosition(this.node.position);this.bodySegments.push(e)},a.checkSelfCollision=function(){for(var e,t=this.node.position,i=n(this.bodySegments);!(e=i()).done;){var o=e.value;if(t.equals(o.position))return void y.Instance.gameOver()}this.tailSegment&&t.equals(this.tailSegment.position)&&y.Instance.gameOver()},a.snakeSpeedModifier=function(e){this.moveInterval=e},a.snakeSpeedReset=function(e){1==e?this.moveInterval=.3:2==e?this.moveInterval=.25:3==e&&(this.moveInterval=.2)},a.getBodySegments=function(){return this.bodySegments},a.getTailSegment=function(){return this.tailSegment},a.getInvincibility=function(){return this.invincibility},a.setInvincibility=function(e){this.invincibility=e},a.powerup=function(e){1==e?this.snakeSpeedModifier(.4):2==e&&(this.invincibility=!0)},a.onDestroy=function(){d.off(g.EventType.KEY_DOWN,this.onKeyDown,this)},a.reset=function(){var e=new m(10,70,0);this.node.setPosition(e),this.direction.set(1,0),this.nextDirection.set(1,0);for(var t,i=n(this.bodySegments);!(t=i()).done;){t.value.destroy()}this.bodySegments=[],this.tailSegment&&(this.tailSegment.destroy(),this.tailSegment=null),this.initializeSnake()},t}(f)).prototype,"headSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(A.prototype,"headUp",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(A.prototype,"headDown",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(A.prototype,"headLeft",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"headRight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(A.prototype,"bodySegmentPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(A.prototype,"tailSegmentPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=A))||x));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});